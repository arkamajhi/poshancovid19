<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!--script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-analytics.js"></script>
    <script src="index.js"></script-->
    <meta http-equiv="refresh" content="3000">
    <meta charset="utf-8">
    <title>1000-Days</title>
  </head>
  <body>

    <!--div class="">
      <input id="email_field" type="email" placeholder="Email.." name="" value="">
      <input id="pass_field" type="password" placeholder="Password.." name="" value="">
      <button onclick="signup()" type="button" name="button">Sign Up</button>
      <button onclick="signin()" type="button" name="button">Log In</button>
      <button onclick="signout()" type="button" name="button">Log Out</button>
    </div-->

    <!-- Flexbox container for aligning the toasts -->

    <div class=""> <!--d-none d-md-block hide on screens smaller than md-->

    </div>

    <div class="row"> <!-- d-md-none hide on screens starting from md-->

      <div class="col-lg-12 col-md-12 col-xs-12">

        <div class="container text-right h7 font-weight-bold" style="padding-bottom: 2%;padding-top: 2%;">
          <div class="cardss" style="">
            <div class="container">
              <div class="text-center h4" id="monthsday">
              </div>
              <div class=""style="padding-bottom: 1%;border-bottom: solid black 1px"></div>
            </div>

            <div class="" style="padding-top: 2%;">
              <div class="row">
                <div class="col-5">
                  Hb level (mg/dL)
                </div>
                <div class="col-6">
                  <div class="progress">
                    <div id="hb-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;"></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-5">
                  Weight (kg)
                </div>
                <div class="col-6">
                  <div class="progress">
                    <div id="wt-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;"></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-5">
                  Money (₹)
                </div>
                <div class="col-6">
                  <div class="progress">
                    <div id="mo-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;"></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-5">
                  Health Points
                </div>
                <div class="col-6">
                  <div class="progress">
                    <div id="hp-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                </div>
              </div>
              <div class="col-12" style="padding-bottom: 3%;padding-top: 3%;">
                <center><button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#ExchangeModal" style="border-radius: 10px;">Exchange Health Points for Hb, Weight and Money</button></center>
              </div>
            </div>
        </div>

        <div class="container">
          <!-- The Modal -->
          <div class="modal" id="ResultModal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                </div>
                <!-- Modal body -->
                <div class="modal-body" >
                  <center><div id="modal-body"></div></center>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer d-block">
                  <div class="text-center">
                    <button onclick="nextquestion()" type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="container">
          <!-- The Modal -->
          <div class="modal" id="ExchangeModal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                  <center>Click on the buttons to exchange</center>
                </div>
                <!-- Modal body -->
                <div class="modal-body" >
                  <center>
                    <div id="modal-body">

                      <div id="Hb_exchange" class="" style="padding-bottom:2%">
                        <button type="button" class="btn btn-primary" data-dismiss="">
                          <div class="container">
                            <div class="">1 Health Point = 1 Hb level (mg/dL)</div>
                            <div class="spinner-border spinner-border-sm" id = "Hb_loading" style="display:none"></div>
                          </div>
                        </button>
                      </div>

                      <div id="Wt_exchange" class="" style="padding-bottom:2%">
                        <button type="button" class="btn btn-primary" data-dismiss="">
                          <div class="container">
                            <div class="">1 Health Point = 1kg (Weight)</div>
                            <div class="spinner-border spinner-border-sm" id = "Wt_loading" style="display:none"></div>
                          </div>
                        </button>
                      </div>

                      <div id="Mo_exchange" class="" style="padding-bottom:2%">
                        <button type="button" class="btn btn-primary" data-dismiss="">
                          <div class="container">
                            <div class="">1 Health Point = ₹ 100 (Money)</div>
                            <div class="spinner-border spinner-border-sm" id = "Mo_loading" style="display:none"></div>
                          </div>
                        </button>
                      </div>

                      <div class="" id="HP_left">
                      </div>

                      <script type = "text/javascript">
                      $("#Hb_exchange").bind("click", function() {
                        show("Hb_loading");
                        if(hb<hb_max&&hp>0)
                          update_scores(1,0,0,-1); //update_scores(new_hb,new_wt,new_mo,new_hp)
                      });
                      $("#Wt_exchange").bind("click", function() {
                        show("Wt_loading");
                        if(wt<wt_max&&hp>0)
                          update_scores(0,1,0,-1); //update_scores(new_hb,new_wt,new_mo,new_hp)
                      });
                      $("#Mo_exchange").bind("click", function() {
                        show("Mo_loading");
                        if(mo<mo_max&&hp>0)
                          update_scores(0,0,100,-1); //update_scores(new_hb,new_wt,new_mo,new_hp)
                      });

                      var spin;
                      function show(a) {
                          spin=document.getElementById(a);
                          spin.style.display="inline-block";
                          setTimeout('hide()', 1000);  // 5 seconds
                      }
                      function hide() {
                          spin.style.display="none";
                      }
                      </script>

                    </div>
                  </center>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer d-block">
                  <div class="text-center">
                    <button onclick="" type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="" style="padding-top: 3%;">
          <div class="cardss">
            <div class="container scenario h5 text-center">
              <div id="situation" class="" style="padding-bottom: 2%; border-bottom: solid black 1px"></div>
            </div>
            <div class="container h3 text-center text-uppercase" style="" id="question_text">
            </div>

            <table id="options_table" class="table table-borderless table-responsive table-small text-center font-weight-bold" style="color:transparent">
              <thead >
                <tr>
                  <th scope="col" id="option_header1">...............8...............</th>
                  <th scope="col" id="option_header2">...............8...............</th>
                  <th scope="col" id="option_header3">...............8...............</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td id="option1" >
                    <div class="option-card" data-toggle="modal" data-target="#ResultModal" onclick="optionclick(1)" id="option1_text">
                      Option1
                    </div>
                  </td>
                  <td id="option2">
                    <div class="option-card" data-toggle="modal" data-target="#ResultModal" onclick="optionclick(2)" id="option2_text">
                      Option2
                    </div>
                  </td>
                  <td id="option3">
                    <div class="option-card" data-toggle="modal" data-target="#ResultModal" onclick="optionclick(3)" id="option3_text">
                      Option3
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>

    </div>

    </div>

    <script type="text/javascript">
      var google_json=[];

      function display(json)
      {
        for (var i = 0; i < json.feed.entry.length; i++)
        {
          google_json.push
          ({
            question_number:i,
            monthsday:json.feed.entry[i].gsx$days.$t,
            situation:json.feed.entry[i].gsx$situation.$t,
            image:json.feed.entry[i].gsx$image.$t,
            option1:json.feed.entry[i].gsx$option1.$t,
            option2:json.feed.entry[i].gsx$option2.$t,
            option3:json.feed.entry[i].gsx$option3.$t,
            result1body:json.feed.entry[i].gsx$result1body.$t,
            result2body:json.feed.entry[i].gsx$result2body.$t,
            result3body:json.feed.entry[i].gsx$result3body.$t,
            result1scoretext:json.feed.entry[i].gsx$result1scoretext.$t,
            result2scoretext:json.feed.entry[i].gsx$result2scoretext.$t,
            result3scoretext:json.feed.entry[i].gsx$result3scoretext.$t,
            hb1:json.feed.entry[i].gsx$hb1.$t,
            hb2:json.feed.entry[i].gsx$hb2.$t,
            hb3:json.feed.entry[i].gsx$hb3.$t,
            wt1:json.feed.entry[i].gsx$wt1.$t,
            wt2:json.feed.entry[i].gsx$wt2.$t,
            wt3:json.feed.entry[i].gsx$wt3.$t,
            mo1:json.feed.entry[i].gsx$mo1.$t,
            mo2:json.feed.entry[i].gsx$mo2.$t,
            mo3:json.feed.entry[i].gsx$mo3.$t,
            hp1:json.feed.entry[i].gsx$hp1.$t,
            hp2:json.feed.entry[i].gsx$hp2.$t,
            hp3:json.feed.entry[i].gsx$hp3.$t,
            question_text:json.feed.entry[i].gsx$questiontext.$t,
            condition:json.feed.entry[i].gsx$condition.$t,
            skip:json.feed.entry[i].gsx$skip.$t
          });
        }
      }
      console.log(google_json);

      var hb=0; var wt=0; var mo=0; var hp=0;
      var option_no=0;
      window.addEventListener('load', (event) =>
      {
        nextquestion();
      });


      var q_no=0;
      function nextquestion()
      {
        if (q_no>0)
        {
          if (option_no==1)
            update_scores(google_json[q_no-1].hb1,google_json[q_no-1].wt1,google_json[q_no-1].mo1,google_json[q_no-1].hp1);
          else if (option_no==2)
            update_scores(google_json[q_no-1].hb2,google_json[q_no-1].wt2,google_json[q_no-1].mo2,google_json[q_no-1].hp2);
          else if (option_no==3)
            update_scores(google_json[q_no-1].hb3,google_json[q_no-1].wt3,google_json[q_no-1].mo3,google_json[q_no-1].hp3);
        }
        else if (q_no==0)
        {
          update_scores(10,40,1000,5); //update_scores(new_hb,new_wt,new_mo,new_hp)
        }

        if(q_no<google_json.length)
        {
          $("#monthsday").html(google_json[q_no].monthsday);
          $("#situation").html(google_json[q_no].situation);
          $("#question_text").html(google_json[q_no].question_text);
          $("#image").html(google_json[q_no].image);
          $("#option1_text").html(google_json[q_no].option1);
          $("#option2_text").html(google_json[q_no].option2);

          if(google_json[q_no].option3!="")
          {
            $("#option3").show();
            $("#option_header3").show();
            $("#option3_text").html(google_json[q_no].option3);
          }
          else
          {
            $("#option3").hide();
            $("#option_header3").hide();
          }
        }
        else
        {
          alert("Over");
        }
        q_no++;
        console.log(q_no);
      }

      function optionclick(option_number)
      {
        option_no=option_number;
        if(google_json[q_no].condition=="")
        {
          if(option_number==1)
          {
            $("#modal-body").html(google_json[q_no-1].result1body+"<br><br>"+google_json[q_no-1].result1scoretext);
          }
          else if(option_number==2)
          {
            $("#modal-body").html(google_json[q_no-1].result2body+"<br><br>"+google_json[q_no-1].result2scoretext);
          }
          else if(option_number==3)
          {
            $("#modal-body").html(google_json[q_no-1].result3body+"<br><br>"+google_json[q_no-1].result3scoretext);
          }
        }
      }

      var hb_min=5;var hb_max=12;
      var wt_min=0;var wt_max=100;
      var mo_min=0;var mo_max=6000;
      var hp_min=0;var hp_max=10;

      function update_scores(new_hb,new_wt,new_mo,new_hp)
      {
        hb = (((hb+parseFloat(new_hb))>hb_max)?(hb_max):(hb+parseFloat(new_hb)));
        wt = (((wt+parseFloat(new_wt))>wt_max)?(wt_max):(wt+parseFloat(new_wt)));
        mo = (((mo+parseFloat(new_mo))>mo_max)?(mo_max):(mo+parseFloat(new_mo)));
        hp = (((hp+parseFloat(new_hp))>hp_max)?(hp_max):(hp+parseFloat(new_hp)));

        $("#hb-bar").css("width", ((((hb-hb_min)*100)/(hb_max-hb_min)).toString()+"%"));
        $("#wt-bar").css("width", ((((wt-wt_min)*100)/(wt_max-wt_min)).toString()+"%"));
        $("#mo-bar").css("width", ((((mo-mo_min)*100)/(mo_max-mo_min)).toString()+"%"));
        $("#hp-bar").css("width", ((((hp-hp_min)*100)/(hp_max-hp_min)).toString()+"%"));

        $("#hb-bar").html(hb);
        $("#wt-bar").html(wt);
        $("#mo-bar").html(mo);
        $("#hp-bar").html(hp);

        $("#HP_left").html(hp + " Health Points Left");
      }

    </script>
    <script src="https://spreadsheets.google.com/feeds/list/1Gwf9xzAAZY3gnXmgnCUSkvC5xZSJ7LQCZ3AvBk0tPEQ/1/public/values?alt=json-in-script&amp;callback=display" type="text/javascript"></script>

    <style>

    .table td, .table th, .table thead th
    {
      border-top-color: transparent;
      border-bottom-color: transparent;
    }
    .table td
    {
      padding-bottom: 10px;
    }
    .cardss
    {
      background-color: #DCDCDC;
      color: black;
      border: none;
      outline: none;
      cursor: pointer;
      padding-top: 10px;
      padding-bottom: 0px;
      font-size: 15px;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
      transition: all 0.3s cubic-bezier(.25,.8,.25,1);
    }

      .option-card
      {
        background-color: white;
        color: black;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        font-size: 15px;
        height:200px;
        width: 100%;
        border-radius: 20px;
        margin-top: -60px;
        padding-top: 10px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
        transition: all 0.3s cubic-bezier(.25,.8,.25,1);

        display: flex;
        align-items: center;
        justify-content: center;
      }

      .option-card:hover
      {
        box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
        background-color: #777;
        color: white;
      }

      .progress
      {
        margin-top: 5px;
        margin-left:-24px;
      }

    </style>


  </body>
</html>
